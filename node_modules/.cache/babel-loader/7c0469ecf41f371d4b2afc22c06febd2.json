{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\acer\\\\Desktop\\\\coding tutorial\\\\raraa_react\\\\src\\\\Payment.js\";\nimport React, { useEffect, useState } from 'react';\nimport CheckoutProducts from './CheckoutProducts';\nimport './Payment.css';\nimport { useStateValue } from './StateProvider';\nimport { Link } from 'react-router-dom';\nimport { useElements, useStripe, CardElement } from '@stripe/react-stripe-js';\nimport CurrencyFormat from \"react-currency-format\";\nimport { getBasketTotal } from \"./reducer\";\n\nfunction Payment() {\n  const [{\n    basket,\n    user\n  }, dispatch] = useStateValue();\n  const stripe = useStripe();\n  const elements = useElements();\n  const [error, setError] = useState(null);\n  const [disabled, setDisabled] = useState(true);\n  const [clientSecret, setclientSecret] = useState(true);\n  const [succeeded, setsucceeded] = useState(false);\n  const [processing, setprocessing] = useState(\"\");\n  useEffect(() => {\n    //generate the special stripe secret which allows us to charge a customer\n    const getclientSecret = async () => {\n      const response = await axios({\n        method: 'post',\n        url: `/payment/create?total=${getBasketTotal(basket) * 100}`\n      });\n    };\n\n    getclientSecret();\n  }, [basket]);\n\n  const handleSubmit = async e => {\n    //stripe stuff\n    e.preventDefault();\n    setprocessing(true); // const payLoad = await stripe \n  };\n\n  const handleChange = e => {\n    // display the changes in card elemnt \n    //display if there is any error\n    setDisabled(e.empty);\n    setError(e.error ? e.error.message : \"\");\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"payment\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"payment_container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"h1\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 13\n    }\n  }, \"Checkout(\", /*#__PURE__*/React.createElement(Link, {\n    to: \"/checkout\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 17\n    }\n  }, basket === null || basket === void 0 ? void 0 : basket.length, \" items\"), \")\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"payment_section\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"payment_title\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"h3\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 25\n    }\n  }, \"Delivery Address\")), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"payment_address\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 25\n    }\n  }, user === null || user === void 0 ? void 0 : user.email), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 25\n    }\n  }, \"A-15-11\"), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 25\n    }\n  }, \"PJ MIDTOWN\"))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"payment_section\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"payment_title\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"h3\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 25\n    }\n  }, \"Review items and delivery\")), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"payment_items\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 21\n    }\n  }, basket.map(item => /*#__PURE__*/React.createElement(CheckoutProducts, {\n    id: item.id,\n    title: item.title,\n    image: item.image,\n    price: item.price,\n    rating: item.rating,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 29\n    }\n  })))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"payment_section\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"payment_title\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"h3\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 25\n    }\n  }, \"Payment Method\")), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"payment_details\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"form\", {\n    onSubmit: handleSubmit,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(CardElement, {\n    onChange: handleChange,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 29\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"payment_priceContainer\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(CurrencyFormat, {\n    renderText: value => /*#__PURE__*/React.createElement(\"h3\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 37\n      }\n    }, \"Order Total: \", value),\n    decimalScale: 2,\n    value: getBasketTotal(basket),\n    displayType: \"text\",\n    thousandSeparator: true,\n    prefix: \"RM\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 33\n    }\n  }), /*#__PURE__*/React.createElement(\"button\", {\n    disabled: processing || disabled || succeeded,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 33\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 37\n    }\n  }, processing ? /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 57\n    }\n  }, \"Processing\") : \"Buy Now\"))), error && /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 39\n    }\n  }, error))))));\n}\n\nexport default Payment;","map":{"version":3,"sources":["C:/Users/acer/Desktop/coding tutorial/raraa_react/src/Payment.js"],"names":["React","useEffect","useState","CheckoutProducts","useStateValue","Link","useElements","useStripe","CardElement","CurrencyFormat","getBasketTotal","Payment","basket","user","dispatch","stripe","elements","error","setError","disabled","setDisabled","clientSecret","setclientSecret","succeeded","setsucceeded","processing","setprocessing","getclientSecret","response","axios","method","url","handleSubmit","e","preventDefault","handleChange","empty","message","length","email","map","item","id","title","image","price","rating","value"],"mappings":"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","sourcesContent":["import React, {useEffect, useState} from 'react';\r\nimport CheckoutProducts from './CheckoutProducts';\r\nimport './Payment.css';\r\nimport { useStateValue } from './StateProvider';\r\nimport {Link} from 'react-router-dom';\r\nimport { useElements, useStripe, CardElement } from '@stripe/react-stripe-js';\r\nimport CurrencyFormat from \"react-currency-format\";\r\nimport {getBasketTotal} from \"./reducer\";\r\n\r\nfunction Payment() {\r\n    const [{basket, user}, dispatch] = useStateValue();\r\n\r\n    const stripe =useStripe();\r\n    const elements = useElements();\r\n\r\n    const[error, setError] = useState(null);\r\n    const[disabled, setDisabled] = useState(true)\r\n    const[clientSecret, setclientSecret] = useState(true)\r\n\r\n    const[succeeded, setsucceeded] = useState(false)\r\n    const[processing, setprocessing] = useState(\"\")\r\n\r\n    useEffect(() =>{\r\n            //generate the special stripe secret which allows us to charge a customer\r\n\r\n            const getclientSecret = async () => {\r\n                const response = await axios({\r\n                    method: 'post',\r\n                    url: `/payment/create?total=${getBasketTotal(basket) *100}`\r\n                })\r\n            }\r\n            getclientSecret();\r\n    }, [basket])\r\n\r\n\r\n\r\n    const handleSubmit =async (e) =>{\r\n            //stripe stuff\r\n            e.preventDefault();\r\n            setprocessing(true);\r\n            \r\n\r\n            // const payLoad = await stripe \r\n    }\r\n\r\n    const handleChange = e =>{\r\n        // display the changes in card elemnt \r\n        //display if there is any error\r\n        setDisabled(e.empty);\r\n        setError(e.error ? e.error.message : \"\");\r\n    }\r\n\r\n    return (\r\n        <div className='payment'>\r\n            <div className = 'payment_container'>\r\n            <h1>\r\n            Checkout(\r\n                <Link to =\"/checkout\">{basket?.length} items</Link>\r\n            )\r\n                \r\n            </h1>\r\n                \r\n                <div className='payment_section'>\r\n                    <div className='payment_title'>\r\n                        <h3>Delivery Address</h3>\r\n                    </div>\r\n                    <div className='payment_address'>\r\n                        <p>{user?.email}</p>\r\n                        <p>A-15-11</p>\r\n                        <p>PJ MIDTOWN</p>\r\n                    </div>\r\n                </div>\r\n\r\n                <div className='payment_section'>\r\n                    <div className='payment_title'>\r\n                        <h3>Review items and delivery</h3>\r\n                    </div>\r\n                    <div className='payment_items'>\r\n                        {basket.map(item => (\r\n                            <CheckoutProducts\r\n                             id={item.id}\r\n                            title={item.title}\r\n                            image={item.image}\r\n                            price={item.price}\r\n                            rating={item.rating}\r\n                        />\r\n                        ))}\r\n                    </div>\r\n                </div>\r\n\r\n                <div className='payment_section'>\r\n                    <div className=\"payment_title\">\r\n                        <h3>Payment Method</h3>\r\n                    </div>\r\n                    <div className=\"payment_details\">\r\n                        {/*stripe*/}\r\n                        <form onSubmit={handleSubmit}>\r\n                            <CardElement onChange={handleChange} />\r\n                            <div className = 'payment_priceContainer'>\r\n                                <CurrencyFormat\r\n                                    renderText = {(value) => (\r\n                                    <h3>Order Total: {value}</h3>\r\n                                )}\r\n                                decimalScale={2}\r\n                                value={getBasketTotal(basket)}\r\n                                displayType={\"text\"}\r\n                                thousandSeparator={true}\r\n                                prefix={\"RM\"}\r\n                                />\r\n                                <button disabled={processing || disabled || succeeded}>\r\n                                    <span>{processing ? <p>Processing</p> : \"Buy Now\"}</span>\r\n                                </button>\r\n                            </div>\r\n                            {error && <div>{error}</div>}\r\n                        </form>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Payment\r\n"]},"metadata":{},"sourceType":"module"}